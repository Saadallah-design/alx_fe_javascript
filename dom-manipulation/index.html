<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Quote Generator</title>
  </head>
  <body>
    <h1>Dynamic Quote Generator</h1>
    <div id="quoteDisplay"></div>
    <button id="newQuote">Show New Quote</button>

    <!-- Adding quotes by the user -->
    <div>
        <input id="newQuoteText" type="text" placeholder="Enter a new quote" />
        <input id="newQuoteCategory" type="text" placeholder="Enter quote category" />
        <button onclick="addQuote()">Add Quote</button>
      </div>

      <!-- JS CODE BELOW -->
    <script>
        const quoteDisplayer = document.getElementById('quoteDisplay');
        const showQuoteBtn = document.getElementById('newQuote');

        // array of quotes as object
        const quotes = [ 
        { text: "The only way to do great work is to love what you do.", category: "Inspiration" },
        { text: "Life is what happens when you're busy making other plans.", category: "Life" },
        { text: "The only place where success comes before work is in the dictionary.", category: "Work Ethic"},
        { text: "Success is the sum of small efforts, repeated day in and day out.", category: "Persistence"},
        { text: "Perseverance is the hard work you do after you get tired of doing the hard work you already did.", category: "Perseverance"},
        { text: "The best way to predict the future is to create it.", category: "Vision & Action"},
        ];        
        // show random quote function
        function showRandomQuote(){

            // 1. Calculate a NEW random index every time the function runs
            let quoteIndex = Math.floor(Math.random() * quotes.length);

            // 2. Select the corresponding quote object
            let selectedQuote = quotes[quoteIndex];

             // 3. Update the innerHTML with the specific text and category
                // We use the object properties: selectedQuote.text and selectedQuote.category
                quoteDisplayer.innerHTML = 
                `<p class="quote-text">"${selectedQuote.text}"</p>
                <span class="quote-category">Category: ${selectedQuote.category}</span>`;
                
            // quoteDisplayer.innerHTML = `<div> ${quotes.text} <span> ${quotes.category}</span> </div>`;
            
        };

        // ERROR: showQuoteBtn.addEventListener('click', showRandomQuote());
        // PROBELM ABOVE: 
        // When JavaScript sees showRandomQuote(), it runs the function once and passes the function's return value (which is undefined) to the listener. The button then does nothing on future clicks.
        // The Correct Approach: Passing a Reference
        // You must pass the name of the function (a reference) without parentheses. This tells the event listener: "When the click happens, execute this function."
        showQuoteBtn.addEventListener('click', showRandomQuote);
        showQuoteBtn.addEventListener('click', function() {
            console.log('hello')});

        //Now call the function on load
        // showRandomQuote();

        // ---------------------------------------------

        // 2. Adding Use Input Quote
        const newQuoteText = document.getElementById('newQuoteText');
        const newQuoteCategory = document.getElementById('newQuoteCategory');

        function addQuote() {

            // 1. getting the value the user put into the form and store them in vars
            let userQuoteText = newQuoteText.value.trim();;
            let userQuoteCat = newQuoteCategory.value.trim();;

            // 1.1 making sure the input is not empty
            if ( userQuoteText === '' || userQuoteCat === '') {
                alert('Add a quote to display. Make sure to add both text and category!');
                return;
            }

            // 2. storing them into a new array 
            const newQuoteObject = {
            text: userQuoteText,
            category: userQuoteCat
            };

            // 3. updating the inner html
            quoteDisplayer.innerHTML = 
                `<p class="quote-text">"${userQuoteText}"</p>
                <span class="quote-category">Category: ${userQuoteCat}</span>`;

            
            // 4. pushing the new added quote into the quotes array
            quotes.push(newQuoteObject);

            // 5. cleaning the input fields
            newQuoteText.value = '';
            newQuoteCategory.value = '';

        };
        
        


    </script>
  </body>
  </html>